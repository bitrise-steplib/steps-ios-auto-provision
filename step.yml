title: iOS Auto Provision
summary: Manages iOS Provisioning Profiles for your Xcode project
description: |-
  Manages iOS Provisioning Profiles for your Xcode project:

  - Ensure Application Identifier on the Apple Developer Portal
  - Ensure the project capabilities
  - Ensure the Provisioning Profiles
  - Ensure the Test Devices
  - Installs codesigning Certificates

  Setup guide: https://blog.bitrise.io/ios-auto-provision-step
website: https://github.com/bitrise-steplib/steps-ios-auto-provision
source_code_url: https://github.com/bitrise-steplib/steps-ios-auto-provision
support_url: https://github.com/bitrise-steplib/steps-ios-auto-provision/issues

host_os_tags:
  - osx-10.10
  - ubuntu-16.04

project_type_tags:
  - ios

type_tags:
  - code-sign

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

inputs:
- build_url: $BITRISE_BUILD_URL
  opts:
    title: "Bitrise build url"
    description: "Bitrise build url"
    is_required: true
- build_api_token: $BITRISE_BUILD_API_TOKEN
  opts:
    title: "Bitrise build api token"
    description: "Bitrise build api token"
    is_required: true
- certificate_urls: $BITRISE_CERTIFICATE_URL
  opts:
    title: "Certificate URL"
    description: |
      URL of the certificate(s) to download.  
      Multiple URLs can be specified, separated by a pipe (`|`) character.  
      You can specify a local path as well, using the `file://` scheme.  

      Provide a development certificate url, to ensure development code sign files for the project.  
      Provide a distribution certificate url, to ensure distribution code sign files for your project.  

      One development and one distribution certificate is allowed.

      Example: `file://development/certificate/path|https://distribution/certificate/url`
    is_required: true
- passphrases: $BITRISE_CERTIFICATE_PASSPHRASE
  opts:
    title: "Certificate passphrase"
    description: |
      Certificate passphrase.  
      Multiple passphrases can be specified, separated by a pipe (`|`) character.  

      Specified certificate passphrase count should match the count of the certificate urls.

      example: development certificate with empty passphrase, distribution certificate with passphrase

      ```
      passphrases: "|distribution-passphrase"
      ```
    is_required: true
- team_id:
  opts:
    title: "The Developer Portal team id"
    description: |-
      The Developer Portal team to manage the project's code singing files.  

      Format example:
      - `1MZX23ABCD4`
- distributon_type:
  opts:
    title: "Distribution type"
    description: |-
      Describes how Xcode should sign your project.
    value_options:
    - "development"
    - "app-store"
    - "ad-hoc"
    - "enterprise"
    is_required: true
- project_path: $BITRISE_PROJECT_PATH
  opts:
    title: "Xcode Project (or Workspace) path"
    summary: ""
    description: |-
      A `.xcodeproj` or `.xcworkspace` path.
    is_required: true
- keychain_path: $HOME/Library/Keychains/login.keychain
  opts:
    category: Config
    title: Keychain Path
    is_required: true
- keychain_password: $BITRISE_KEYCHAIN_PASSWORD
  opts:
    category: Config
    title: Keychain's password
    is_required: true
- verbose_log: "no"
  opts:
    title: "Enable verbose logging?"
    summary: ""
    description: |-
      Enable verbose logging?
    is_required: true
    value_options:
    - "yes"
    - "no"
